# 本地开发环境配置
spring:
  # 本地数据库配置
  datasource:
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
    driver-class-name: org.postgresql.Driver
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      pool-name: AgentDemoHikariCP

  jpa:
    hibernate:
      ddl-auto: update  # 本地开发自动更新表结构
    show-sql: false  # 本地开发显示 SQL
    properties:
      hibernate:
        format_sql: true

  # 本地 Redis 配置
  data:
    redis:
      host: ${REDIS_HOST}
      port: ${REDIS_PORT}
#      password: ${REDIS_PASSWORD:}
      database: ${REDIS_DB}
      timeout: 3000

# MCP 服务器本地配置
mcp:
  enabled: ${MCP_ENABLED:true}
  # 编排策略: PRIORITY(优先级), LOAD_BALANCE(负载均衡), ROUND_ROBIN(轮询), PARALLEL(并行)
  orchestration-strategy: PRIORITY
  servers:
    # 文件系统工具（主服务器，高优先级）
    - name: filesystem
      type: stdio
      command: ${NPX_CMD:npx}
      args:
        - '-y'
        - '@modelcontextprotocol/server-filesystem'
        - ${PROJECT_PATH:.}
      enabled: ${MCP_FILESYSTEM_ENABLED:true}
      priority: 10           # 优先级（数字越小越高）
      weight: 3              # 负载均衡权重
      tags:                  # 标签分组
        - file
        - filesystem
        - local
      fallback: false        # 是否为备用服务器

    # GitHub 工具（中等优先级）
    # 需要 GITHUB_TOKEN 环境变量进行身份验证
    - name: github
      type: stdio
      command: ${NPX_CMD:npx}
      args:
        - '-y'
        - '@modelcontextprotocol/server-github'
      env:
        - 'GITHUB_TOKEN=${GITHUB_TOKEN}'
      enabled: ${MCP_GITHUB_ENABLED:true}
      priority: 20
      weight: 2
      tags:
        - github
        - code
        - remote
        - scm

# 日志配置（本地开发更详细）
logging:
  level:
    cn.chollter.agent.demo: INFO
    org.hibernate.SQL: INFO
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
